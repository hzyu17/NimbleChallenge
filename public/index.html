<!doctype html>
<html lang="en">
  <title>WebTransport over HTTP/3 Echo client</title>
  <meta charset="utf-8">
  <!-- <script src="client.js"></script> -->
  <script src="client.js?v=2"></script>
  <link rel="stylesheet" href="client.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <body>
  <div id="top">
    <div id="explanation">
      This tool can be used to connect to an arbitrary WebTransport echo server.
      It has several limitations:
      <ul>
        <li>Due to protocol changes, it is only compatible with Chromium M99+.</li>
        <li>It can only send an entirety of a stream at once.  Once the stream
          is opened, all of the data is immediately sent, and the write side of
          the steam is closed.</li>
        <li>This tool does not listen to server-initiated bidirectional
          streams.</li>
        <li>Stream IDs are different from the one used by QUIC on the wire, as
          the on-the-wire IDs are not exposed via the Web API.</li>
        <li>The <code>WebTransport</code> object can be accessed using the developer console via <code>currentTransport</code>.</li>
      </ul>
    </div>
    <div id="tool">
    <h1>WebTransport over HTTP/3 Echo client</h1>
    <div>
      <h2>Establish WebTransport connection</h2>
      <div class="input-line">
      <label for="url">URL:</label>
      <input type="text" name="url" id="url"
             value="https://localhost:4433/echo">
      <input type="button" id="connect" value="Connect" onclick="connect()">
      <input type="button" id="sdpoffer" value="Send SDP Offer" onclick="sendSDP()">
      <pre id="log"></pre>
      </div>
    </div>

    <h2>2D Bouncing Ball Stream</h2>
    <video id="video" autoplay playsinline muted width="400" height="300"
       style="background:black; border:2px solid green;"></video>
    <canvas id="canvas" width="400" height="300" style="display: none;"></canvas>

    <div>
      <h2>Event log</h2>
      <ul id="event-log">
      </ul>
    </div>
    </div>
  </div>
  </body>
</html>
